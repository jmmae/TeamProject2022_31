<!DOCTYPE html>
<html>
    <style>
        table,
        th,
        td {
            border: 1px solid rgb(255, 255, 255);
        }
    </style>
    <head>
        <link href="StyleSheet.css" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <title>Staff</title>
    </head>

    
    <a href="MainMenu.html">
        <img src="resources/header.png" />
    </a>

    <div class="header"> 
        <p>Staff Access.</p>
    </div>

    <div class="staff">
        <button id="getButton" type="button">Get Menu</button>

        <p>
        Item Name: <br />
        <input type="text" id="foodtest" placeholder="ItemName"> <br /> 
        </p>
        <p>
        Price: <br />
        <input type="text" id="pricetest" placeholder="Price"> <br />
        </p>
        <p>
        Available: <br />
        <input type="text" id="Available" placeholder="Available"> <br />
        </p>
        <input type="submit" id="addFood" onclick="addFood">

        <p>
        <button id="deleteButton" type="button">Delete</button> <br />
        <button id="outOfStockButton" type="button">Set Not Available</button> <br />
        <button id="inStockButton" type="button">Set Available</button> <br />
        </p>
    </div>

    <script type="text/javascript">
        {var menuFood}
        //https://www.w3schools.com/jquery/jquery_get_started.asp
  
        //this makes sure the document is loaded before any code is run
        jQuery(document).ready(function () {
  
        jQuery("#getButton").click(function () {
            //"http://localhost:3000/menu" is the path/document to be found    data is the data returned from the server and status is the success or fail of this attempt
            //  /menu address is call to return all items in the menu
            jQuery.get("http://localhost:3000/menu", function (data, status) {
                menuFood = data;
                //data is a JSON object array   https://www.w3schools.com/js/js_json_objects.asp
                //to access the info  data[i].name-of-field-in-database
                //eg below gereates an alert with the info about the first item in the menu
                var table = "<table>";
                    table += "<th>Food</th>";
                    table += "<th>Price</th>";
                    table += "<th>Available</th>";
                    table += "<th>Select</th>";
                document.getElementById("menu").innerHTML = "";
                for (let i = 0; i < data.length; i++){
                    table += ("<tr id ='" + data[i].foodtest +"1'><td>" + data[i].foodtest + "</td><td>Â£" + data[i].pricetest + "</td><td>" + data[i].Available + "</td> <td><input type='checkbox' name='favorite3' id='" + data[i].foodtest + "' /> </td></tr>");
                }
                    table += "<table>";
                        document.getElementById("menu").innerHTML = table;
                
            });
        });
        });
  
        jQuery("#deleteButton").click(function () {
            jQuery.get("http://localhost:3000/menu", function (data, status) {
                for (let i = 0; i < data.length; i++){
                    if (document.getElementById(data[i].foodtest).checked){
                        menuFood = data[i].foodtest;

                        document.getElementById(data[i].foodtest + "1").remove();
                    }
                }
                jQuery.post("http://localhost:3000/menu", menuFood);
            });
        });

        jQuery("#outOfStockButton").click(function () {
            jQuery.get("http://localhost:3000/menu", function (data, status) {
                for (let i = 0; i < data.length; i++){
                    if (document.getElementById(data[i].foodtest).checked){
                        menuFood = data[i].foodtest;

                        document.getElementById(data[i].foodtest + "1").remove();
                    }
                }
                jQuery.post("http://localhost:3000/menu/outofstock", menuFood);
            });
        });

        jQuery("#inStockButton").click(function () {
            jQuery.get("http://localhost:3000/menu", function (data, status) {
                for (let i = 0; i < data.length; i++){
                    if (document.getElementById(data[i].foodtest).checked){
                        menuFood = data[i].foodtest;

                        document.getElementById(data[i].foodtest + "1").remove();
                    }
                }
                jQuery.post("http://localhost:3000/menu/instock", menuFood);
            });
        });

        jQuery("#addFood").click(function(){
            var addedFood = document.getElementById("foodtest").value + " ," + document.getElementById("pricetest").value + ", " + document.getElementById("Available").value ; 
            console.log(addedFood)
            jQuery.post("http://localhost:3000/menu/added", addedFood);
        });


      </script>

<div class="menu">
<p id="menu"></p>
</div>
<div class="align">
        <div class="button">
            <button onclick="location.href='MainMenu.html'">Go Back</button>
        </div>
    </div>
</html>
